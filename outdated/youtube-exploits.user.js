// ==UserScript==
// @name        YouTube exploits
// @description If the buttons aren't showing, reload.
// @author      f0e
// @version     1.0
// @namespace   https://github.com/f0e
// @match       *://*.youtube.com/*
// @grant       none
// @run-at      document-idle
// @updateURL   https://github.com/f0e/userscripts/raw/main/youtube-exploits.user.js
// @downloadURL https://github.com/f0e/userscripts/raw/main/youtube-exploits.user.js
// @supportURL  https://github.com/f0e/userscripts/issues
// ==/UserScript==

(function () {
  "use strict";

  function getPictures(newDesign) {
    let googlePlus;
    if (newDesign) {
      //new design
      googlePlus = ytInitialData.metadata.channelMetadataRenderer.ownerUrls[1];
    } else {
      //old design
      googlePlus = Array.from(document.getElementsByTagName("link")).find(
        (e) => e.href.indexOf("plus.google") != -1
      ).href;
    }

    let split = googlePlus.split("/");
    let id = split[split.length - 1];
    let url = `https://get.google.com/u/1/albumarchive/${id}`;

    var win = window.open(url, "_blank");
    win.focus();
  }

  function getGooglePlus(newDesign) {
    let googlePlus = ytInitialData.metadata.channelMetadataRenderer.at(-1);

    let url = googlePlus;
    var win = window.open(url, "_blank");
    win.focus();
  }

  function init() {
    const headerContainer = document.querySelector("#inner-header-container");
    if (!headerContainer) {
      setTimeout(init, 100);
      return;
    }

    const googlePlus =
      ytInitialData.metadata.channelMetadataRenderer.ownerUrls.at(-1);

    const elem = document.createElement("a");
    elem.style = `display: inline-block; padding: 5px 10px; margin-right:10px;height: 13px;border: 1px solid #fff;background-color: #3a3a3a;color: #ffffff;font-size: 9pt;font-family: consolas`;
    elem.innerHTML = "old pics";
    elem.id = "oldPics";

    const split = googlePlus.split("/");
    const id = split[split.length - 1];
    const url = `https://get.google.com/u/1/albumarchive/${id}`;
    elem.href = url;

    const elem2 = elem.cloneNode();
    elem2.innerHTML = "google+";
    elem2.href = googlePlus;

    const buttons = headerContainer.querySelector("#buttons");
    buttons.appendChild(elem);
    buttons.appendChild(elem2);
  }

  init();
})();
